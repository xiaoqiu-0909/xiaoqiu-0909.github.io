function getGender(a,b,c,d){"3"==a&&-1!=c.indexOf("性别")&&d.each(function(){if(this.checked){var b=$(this.parentNode.parentNode).find(".label").html();return b.indexOf("男")>-1?gender=1:b.indexOf("女")>-1&&(gender=2),!1}})}function getMarriage(a,b,c,d){"3"==a&&-1!=c.indexOf("婚姻")&&(marriage||d.each(function(){if(this.checked){var b=$(this.parentNode.parentNode).find(".label").html();return b.indexOf("未婚")>-1?marriage=1:(b.indexOf("已婚")>-1||b.indexOf("离异")>-1)&&(marriage=2),!1}}))}function getEducation(a,b,c,d){"3"==a&&(c=c.replace("你","您"),c=c.replace("您目前","您的").replace("您已取得","您的").replace("您取得","您的"),c=c.replace("教育程度","学历"),education||(c.indexOf("您的")>-1&&c.indexOf("学历")>-1||c.indexOf("您的文化")>-1||c.indexOf("您的")>-1&&c.indexOf("受教育")>-1||c.indexOf("您接受教育的水平")>-1||c.indexOf("您的教育水平")>-1)&&d.each(function(){if(this.checked){var b=$(this.parentNode.parentNode).find(".label").html();return b.indexOf("硕士")>-1||b.indexOf("博士")>-1||b.indexOf("研究生")>-1?education=5:b.indexOf("本科")>-1?education=4:b.indexOf("大专")>-1||b.indexOf("专科")>-1?education=3:b.indexOf("高中")>-1||b.indexOf("中专")>-1||b.indexOf("职高")>-1?education=2:(b.indexOf("初中")>-1||b.indexOf("小学")>-1||b.indexOf("没有")>-1||b.indexOf("无")>-1||b.indexOf("未上过学")>-1)&&(education=1),!1}}))}function getAge(a,b,c,d){var e,f,g,h,i,j;("3"==a||"7"==a||"1"==a)&&-1!=c.indexOf("年龄")&&(e="",f=0,3==a?d.each(function(a){return this.checked?(e=$(this.parentNode.parentNode).find(".label").html(),f=a,!1):void 0}):7==a?(g=$("select",b)[0],e=g.options[g.selectedIndex].text,f=g.selectedIndex-1):1==a&&(h=$("input",b),h&&(e=h.val(),f=0)),e&&(i=/[1-9][0-9]*/g,j=e.match(i),j&&0!=j.length&&(j.length>2||(2==j.length?(startAge=j[0],endAge=j[1]):1==j.length&&(0==f?endAge=j[0]:startAge=j[0])))))}function getIncome(a,b,c,d){var e,f,g,h,i,j,k;("3"==a||"7"==a||"1"==a)&&-1!=c.indexOf("收入")&&(e=2,(c.indexOf("月总收入")>-1||c.indexOf("月收入")>-1)&&(e=1),f="",g=0,3==a?d.each(function(a){return this.checked?(f=$(this.parentNode.parentNode).find(".label").html(),g=a,!1):void 0}):7==a?(h=$("select",b)[0],f=h.options[h.selectedIndex].text,g=h.selectedIndex-1):1==a&&(i=$("input",b),i&&(f=i.val(),g=0)),f&&(j=/[1-9][0-9]*/g,k=f.match(j),k&&0!=k.length&&(k.length>2||(2==k.length?(startIncome=k[0],endIncome=k[1]):1==k.length&&(0==g?endIncome=k[0]:startIncome=k[0]),2==e&&(startIncome=parseInt(startIncome/12),endIncome=parseInt(endIncome/12))))))}function checkTitleDescMatch(){var a,b,c;for(title=$("#htitle").text()||"",desc=$("#divDesc").text(),a=0;a<pageHolder.length;a++)for(b=pageHolder[a].cuts,b||(b=pageHolder[a].cuts=$(".cutfield",pageHolder[a])),c=0;c<b.length;c++)desc+=b[c].innerText}function checkQuesMatch(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;try{if(d=new Object,e=a.split("<span"),f=/^\s*\d+[\.、]|\(?\d+\)|（?\d+）/g,e[0]=e[0].replace(f,"").replace(/\s*\*$/g,"").replace(" ",""),d._topic=e[0],d._answer="",d._choose="",b.dataNode,h="",i="","3"==c||"4"==c)j=$("div.label",b),window.hasTouPiao&&$("span.selTitle",b)[0]&&(j=$("span.selTitle",b)),j.each(function(){var b=this.innerHTML;h+=b}),"3"==c&&(k=$("input[type='radio']",b),k.each(function(){return this.checked?(i=$(this.parentNode.parentNode).find(".label").html(),void 0):void 0}));else if("7"==c){for(l=$("select",b)[0].options,m=0;m<l.length;m++)n=l[m].text,h+=n+"|";o=$("select",b)[0],i=o.options[o.selectedIndex].text}else if("1"==c)p=$("input",b),p&&(i=p.val());else if("11"==c)j=$("input.custom",b),j.each(function(){var b=$(this).parent().next().text();h+=b+"|"});else{if("6"==c){if(q=$("table",b),r=$("tr.trlabel th",b),s=new Array,r)for(m=0;m<r.length;m++)s.push(r[m].innerText);if(t=$("tr.rowtitle",b),u=new Array,t)for(m=0;m<t.length;m++)u.push(t[m].innerText);for(v=0,m=0;m<q[0].rows.length;m++)if(w=$(q[0].rows[m]).find("a.rate-off"),w&&!(w.length<1)){for(x=null,y=0;y<w.length;y++)w.eq(y).hasClass("rate-on")&&(x=w.eq(y));z="",x&&x.attr("dval")&&(A=x.attr("dval")-1,z=s.length>A?s[A]:""),d=new Object,d._topic=u.length>v?u[v]:"",d._choose=s.join("|"),d._answer=z,qusInfArray.push(d),v++}return}if("9"==c){if(q=$("table",b),!q[0])return;if(t=$("td.title",b),u=new Array,t)for(m=0;m<t.length;m++)u.push(t[m].innerText);for(v=0,m=0;m<q[0].rows.length;m++)w=$(q[0].rows[m]).find("input"),!w||w.length<1||(z=w[0].value,d=new Object,d._topic=u.length>v?u[v]:"",d._choose="",d._answer=z,qusInfArray.push(d),v++);return}}d._answer=i,d._choose=h,qusInfArray.push(d)}catch(B){}}function GetJpMatch(){var a,b,c,d,e,f;if(checkTitleDescMatch(),changeKeyWords(),jpmarr=matchJp(0),a=matchJp(1),jpmarr.length>0)for(b=0,c=new Array,d=0;d<jpmarr.length;d++){for(e=!1,jj=0;jj<c.length;jj++)if(c[jj]==jpmarr[d].PopulationsId){e=!0;break}e||(b>0?(jpMatchId+=",",jpMatchId+=jpmarr[d].PopulationsId):jpMatchId=jpmarr[d].PopulationsId,c.push(jpMatchId),b++)}if(a.length>0)for(b=0,c=new Array,d=0;d<a.length;d++){for(e=!1,jj=0;jj<c.length;jj++)if(c[jj]==a[d].PopulationsId){e=!0;break}e||(f=0,a[d].TopicKeyWords.length>0&&""!=a[d].TopicKeyWords[0]&&(f+=16),a[d].DescKeyWords.length>0&&""!=a[d].DescKeyWords[0]&&(f+=8),a[d].QuesKeyWords.length>0&&""!=a[d].QuesKeyWords[0]&&(f+=4),a[d].ChooseKeyWords.length>0&&""!=a[d].ChooseKeyWords[0]&&(f+=2),a[d].AnswerKeyWords.length>0&&""!=a[d].AnswerKeyWords[0]&&(f+=1),e||(b>0?(quesMatchId+=",",quesMatchId+=a[d].PopulationsId,jpWayText+=",",jpWayText+=f):(quesMatchId=a[d].PopulationsId,jpWayText=f)))}}function matchJp(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,b=new Array,c=new Array;for(keywordObj=new Array,d=(window.awardkeyNoMatch||"").split("┋"),e=0;e<d.length;e++)f=d[e].split("§"),f.length<8||(g=new Object,g.id=f[0],g.PopulationsId=f[1],g.TopicKeyWords=f[2].replace(/\，/g,",").split(","),g.DescKeyWords=f[3].replace(/\，/g,",").split(","),g.QuesKeyWords=f[4].replace(/\，/g,",").split(","),g.ChooseKeyWords=f[5].replace(/\，/g,",").split(","),g.AnswerKeyWords=f[6].replace(/\，/g,",").split(","),g.Weight=f[7],keywordObj.push(g));for(e=0;e<keywordObj.length;e++)if(!(keywordObj[e].TopicKeyWords.length>0&&""!=keywordObj[e].TopicKeyWords[0]&&!(h=matchkeyList(title,keywordObj[e].TopicKeyWords))||keywordObj[e].DescKeyWords.length>0&&""!=keywordObj[e].DescKeyWords[0]&&!(h=matchkeyList(desc,keywordObj[e].DescKeyWords)))){if(keywordObj[e].QuesKeyWords.length>0&&""!=keywordObj[e].QuesKeyWords[0]||keywordObj[e].ChooseKeyWords.length>0&&""!=keywordObj[e].ChooseKeyWords[0]||keywordObj[e].AnswerKeyWords.length>0&&""!=keywordObj[e].AnswerKeyWords[0]){for(i=!1,j=0;j<qusInfArray.length;j++)if(!(keywordObj[e].QuesKeyWords.length>0&&""!=keywordObj[e].QuesKeyWords[0]&&!(h=matchkeyList(qusInfArray[j]._topic,keywordObj[e].QuesKeyWords))||keywordObj[e].ChooseKeyWords.length>0&&""!=keywordObj[e].ChooseKeyWords[0]&&!(h=matchkeyList(qusInfArray[j]._choose,keywordObj[e].ChooseKeyWords)))){if(keywordObj[e].AnswerKeyWords.length>0&&""!=keywordObj[e].AnswerKeyWords[0]){if(1==a)continue;if(h=matchkeyList(qusInfArray[j]._answer,keywordObj[e].AnswerKeyWords),!h)continue}if(i=!0)break}if(!i)continue}c.push(keywordObj[e])}for(k=0,l=0;l<c.length;l++)k=parseFloat(c[l].Weight)>k?parseFloat(c[l].Weight):k;for(m=0,l=0;l<c.length;l++)k==c[l].Weight&&c[l].PopulationsId!=m&&(m=c[l].PopulationsId,b.push(c[l]));if(1==b.length){for(n=b[0].PopulationsId,keywordObj=new Array,o=(window.awardkeyMatch||"").split("┋"),e=0;e<o.length;e++)f=o[e].split("§"),f.length<9||(g=new Object,g.id=f[0],g.PopulationsId=f[1],g.TopicKeyWords=f[2].replace(/\，/g,",").split(","),g.DescKeyWords=f[3].replace(/\，/g,",").split(","),g.QuesKeyWords=f[4].replace(/\，/g,",").split(","),g.ChooseKeyWords=f[5].replace(/\，/g,",").split(","),g.AnswerKeyWords=f[6].replace(/\，/g,",").split(","),g.Weight=f[7],g.parentIds=f[8].split(","),keywordObj.push(g));for(c=new Array,e=0;e<keywordObj.length;e++){if(p=!1,keywordObj[e].parentIds.length>0)for(j=0;j<keywordObj[e].parentIds.length;j++)if(n==keywordObj[e].parentIds[j]){p=!0;break}if(p&&!(keywordObj[e].TopicKeyWords.length>0&&""!=keywordObj[e].TopicKeyWords[0]&&!(h=matchkeyList(title,keywordObj[e].TopicKeyWords))||keywordObj[e].DescKeyWords.length>0&&""!=keywordObj[e].DescKeyWords[0]&&!(h=matchkeyList(desc,keywordObj[e].DescKeyWords)))){if(keywordObj[e].QuesKeyWords.length>0&&""!=keywordObj[e].QuesKeyWords[0]||keywordObj[e].ChooseKeyWords.length>0&&""!=keywordObj[e].ChooseKeyWords[0]||keywordObj[e].AnswerKeyWords.length>0&&""!=keywordObj[e].AnswerKeyWords[0]){for(i=!1,j=0;j<qusInfArray.length;j++)if(!(keywordObj[e].QuesKeyWords.length>0&&""!=keywordObj[e].QuesKeyWords[0]&&!(h=matchkeyList(qusInfArray[j]._topic,keywordObj[e].QuesKeyWords))||keywordObj[e].ChooseKeyWords.length>0&&""!=keywordObj[e].ChooseKeyWords[0]&&!(h=matchkeyList(qusInfArray[j]._choose,keywordObj[e].ChooseKeyWords)))){if(keywordObj[e].AnswerKeyWords.length>0&&""!=keywordObj[e].AnswerKeyWords[0]){if(1==a)continue;if(h=matchkeyList(qusInfArray[j]._answer,keywordObj[e].AnswerKeyWords),!h)continue}if(i=!0)break}if(!i)continue}c.push(keywordObj[e])}}if(c.length>0){for(k=0,b=new Array,l=0;l<c.length;l++)k=parseFloat(c[l].Weight)>k?parseFloat(c[l].Weight):k;for(m=0,l=0;l<c.length;l++)k==c[l].Weight&&c[l].PopulationsId!=m&&(m=c[l].PopulationsId,b.push(c[l]))}window.needImportWeight&&0!=k&&k<parseFloat(window.needImportWeight)&&(needImport=1)}else window.needImportWeight&&0!=k&&k<parseFloat(window.needImportWeight)&&(needImport=1);return b}function matchkeyList(a,b){var d,e,f,g,h,i,j,c=!1;for(d=0;d<b.length;d++)if(e=b[d],a&&"#"==e.substr(0,1)){for(f=e.replace("#",""),g=a.split("|"),h=0;h<g.length;h++)if(g[h]==f)return c=!0}else if(a&&e.indexOf("&")>-1){for(i=e.split("&"),j=!0,h=0;h<i.length;h++)if(a.indexOf(i[h])<=-1){j=!1;break}if(j)return c=!0}else if(a&&e&&a.indexOf(e)>-1)return c=!0;return c}function changeKeyWords(){var g,h,i,k,l,a=(window.keyWordChange||"").split("┋"),b=new Array,c=new Array,d=new Array,e=new Array,f=new Array;for(g=0;g<a.length;g++)if(h=a[g].split("|"),!(h.length<3))for(i=new Object,k=h[1].split(","),i.keyWord=h[0],i.wordList=h[2],j=0;j<k.length;j++){if(1==k[j]){b.push(i),c.push(i),d.push(i),e.push(i),f.push(i);break}2!=k[j]?3!=k[j]?4!=k[j]?5!=k[j]?6!=k[j]||f.push(i):e.push(i):d.push(i):c.push(i):b.push(i)}for(b.length>0&&""!=title&&(title=changeWays(title,b)),c.length>0&&""!=desc&&(desc=changeWays(desc,c)),l=0;l<qusInfArray.length;l++)d.length>0&&""!=qusInfArray[l]._topic&&(qusInfArray[l]._topic=changeWays(qusInfArray[l]._topic,d)),e.length>0&&""!=qusInfArray[l]._choose&&(qusInfArray[l]._choose=changeWays(qusInfArray[l]._choose,e)),f.length>0&&""!=qusInfArray[l]._answer&&(qusInfArray[l]._answer=changeWays(qusInfArray[l]._answer,f))}function changeWays(a,b){var c,d,e,f,g,h,i,j;for(c=0;c<b.length;c++)for(d=b[c].wordList.split(","),e=0;e<d.length;e++)if(f=d[e],g=!1,a&&f.indexOf("&")>-1){for(h=f.split("&"),i=!0,j=0;j<h.length;j++)if(a.indexOf(h[j])<=-1){i=!1;break}if(i&&(g=!0),g)for(j=0;j<h.length;j++)a=0==j?a.replace(h[j],b[c].keyWord):a.replace(h[j],"")}else a&&f&&a.indexOf(f)>-1&&(g=!0,g&&(a=a.replace(f,b[c].keyWord)));return a}var title="",desc="",qusInfArray=new Array,anIndex=0;